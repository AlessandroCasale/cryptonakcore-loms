# ============================================
# CryptoNakCore LOMS - .env.sample
# Profili suggeriti:
#   - DEV (locale)        -> ENVIRONMENT=dev
#   - PAPER-SERVER (VPS)  -> ENVIRONMENT=paper
#   - LIVE (futuro)       -> ENVIRONMENT=live
# ============================================

# -------------------------
# Environment / Broker
# -------------------------

# Ambiente logico del servizio:
#   dev   = sviluppo locale
#   paper = ambiente paper su server (accanto a RickyBot)
#   live  = riservato per il futuro
ENVIRONMENT=dev

# Modalità broker:
#   - paper = SOLO simulatore (nessun ordine reale)
#   - live  = riservato per il futuro (adapter exchange reale)
BROKER_MODE=paper

# Abilita/disabilita l’apertura automatica di ordini/posizioni dai segnali
OMS_ENABLED=true


# -------------------------
# Database & audit logs
# -------------------------
# Nota sui path:
# - Se DATABASE_URL non è impostata, il default in codice è:
#     sqlite:///./cryptonakcore_loms.db
# - Se AUDIT_LOG_PATH non è impostato, il default è:
#     BASE_DIR/data/bounce_signals.jsonl
#
# Qui sotto mettiamo valori già pronti per il profilo DEV.
# Per PAPER-SERVER trovi gli esempi più sotto.

# --- DEV (locale) - Esempio consigliato ---
# Working directory = root del progetto (dove lanci uvicorn)
# DB e JSONL dentro services/cryptonakcore/data/
DATABASE_URL=sqlite:///./services/cryptonakcore/data/loms_dev.db
AUDIT_LOG_PATH=services/cryptonakcore/data/bounce_signals_dev.jsonl

# Intervallo (in secondi) del watcher auto-close
AUTO_CLOSE_INTERVAL_SEC=1

# Price engine
PRICE_SOURCE=simulator  # simulator | exchange | replay
PRICE_MODE=last         # last | bid | ask | mid | mark


# --- PAPER-SERVER (Hetzner) - ESEMPI (commentati) ---
# Quando porterai LOMS sul server, puoi partire da uno di questi settaggi:
#
# ENVIRONMENT=paper
# BROKER_MODE=paper
# OMS_ENABLED=true
#
# Variante 1 – path RELATIVO (se la working dir è la root della repo)
# DATABASE_URL=sqlite:///./services/cryptonakcore/data/loms_paper.db
# AUDIT_LOG_PATH=services/cryptonakcore/data/bounce_signals_paper.jsonl
#
# Variante 2 – path ASSOLUTO (se preferisci qualcosa di fisso sul server)
# DATABASE_URL=sqlite:////root/cryptonakcore-loms/services/cryptonakcore/data/loms_paper.db
# AUDIT_LOG_PATH=/root/cryptonakcore-loms/services/cryptonakcore/data/bounce_signals_paper.jsonl
#
# (Adatta i path alla posizione reale della repo sul server)


# -------------------------
# Risk limits (paper / semi-live)
# -------------------------
# Limiti base di sicurezza lato LOMS.
# Valori piccoli = ambiente di test / paper molto prudente.

# Limite massimo di posizioni aperte in totale
MAX_OPEN_POSITIONS=5

# Limite massimo di posizioni aperte per singolo simbolo
MAX_OPEN_POSITIONS_PER_SYMBOL=2

# Size massima per posizione in USDT (notional = entry_price * qty)
LOMS_MAX_SIZE_PER_POSITION_USDT=1000.0

# ============================================
# Bitget – live sub-account (100€ semi-live)
# ============================================
# NOTA:
# - Queste variabili servono SOLO per il profilo live / semi-live.
# - Finché BROKER_MODE=paper e BrokerAdapterExchangeBitget non è implementato,
#   possono restare vuote o commentate.
# - Quando arriverà il giorno del semi-live, qui andranno le API del sub-account
#   Bitget dedicato ai 100€ (permessi SOLO trading, NO withdraw).
# ============================================

# Chiave API del sub-account Bitget per il profilo live/semi-live.
BITGET_LIVE_API_KEY=

# Secret API corrispondente.
BITGET_LIVE_API_SECRET=

# Passphrase API Bitget (se richiesta dal profilo API).
BITGET_LIVE_API_PASSPHRASE=

# Etichetta logica per log / DB, es:
# "bitget-semilive-100" oppure "bitget-naklar-100eur"
BITGET_LIVE_ACCOUNT_LABEL=rickybot-100
